(function($){"use strict";var e=38,t=40,n=39,r=37,i=13,a=27;var l="<div class='jq-af-widget'></div>";var s="<ul class='dropdown-menu af-dropdown-menu'></ul>";function o(e){return"<li><a href='#'>"+e+"</a></li>"}function f(e,t){e.empty();$.each(t,function(t,n){e.append($(o(n)))})}function u(e,t){var n=[];if(e.length===0){return t}var r=new RegExp(".*"+e+".*","i");$.each(t,function(e,t){if(r.test(t)){n.push(t)}});return n}function c(e,t,n){var r=u(e,t);f(n,r)}var h=[];function d(n,r){var o=$(l);o.insertBefore(n);n.appendTo(o);n.addClass("af-input");var f=this;var u=$(s).insertAfter(n);var h=r.data||[];this.el=n.get(0);this.$el=n;this.options=r;this.setData=function(e){h=e;r.data=h;c(n.val(),h,u);return f.$el};this.getData=function(){return h};function d(){var e=u.find("li.selected").text();if(r.preAdd&&r.preAdd.apply(f,[e,n])===false){return}n.val(e);g();if(r.postAdd){r.postAdd(e,n)}}function v(r){var l=r.which;if($.inArray(l,[e,t,i,a])<0){c(n.val(),h,u);p();return}var s=u.children("li");if(s.length===0){return}var o=s.filter(".selected");if(o.length===0){if(l===e){o=s.eq(0)}else if(l===t){o=s.eq(s.length-1)}}var f=s.index(o);switch(l){case e:f--;break;case t:f++;break;case i:if(o.length===0){return}d();if(o.next().length>0){o.next().addClass("selected")}else{o.prev().addClass("selected")}o.remove();return;case a:g();return}if(f<0){f+=s.length}else if(f>=s.length){f%=s.length}o.removeClass("selected");s.eq(f).addClass("selected")}var p=this.showAutoFill=function(){c(n.val(),h,u);u.show()};var g=this.hideAutoFill=function(){u.hide()};function w(e){var t=e.target;if(t!==u.get(0)&&t!==n.get(0)){g()}}var y=function(){n.on("focus",p).on("keyup",v);$("html").on("click",w);u.on("click","li",function(e){e.preventDefault();$(this).addClass("selected").siblings(".selected").removeClass("selected");d();g()})};function A(){}y();this.collection.push(this)}var v=d.prototype.collection=[];function p(e){var t=null;$.each(v,function(){if(this.el===e){t=this}});return t}var g={data:{getter:"getData",setter:"setData"}};var w=function(){var e=$(this);if(e.length===0){return e}var t=Array.prototype.slice.apply(arguments,[]);var n;var r=p(e.get(0));if(t.length===0){n=t[0]={}}else if(t.length===1&&typeof t[0]==="object"){n=t[0]}else if(t.length>1&&t[0]==="options"){if(!r){throw Error("Trying to set options before even initialization")}var i=g[t[1]];if(!i){throw Error("Invalid Option")}if(t.length===2){return r[i.getter]()}else if(t.length===3){r[i.setter](t[2]);return r.$el}}else{throw Error("Invalid Arguments")}return $.each(e,function(){h.push(new d($(this),n))})};$.fn.autoFill=w})(jQuery);